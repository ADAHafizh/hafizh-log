---
title: 'Capstone Project | Prototype 1'
description: 'Voronoi & State Machines'
date: 2026-01-27
tags: ['capstone']
image: './bg-capstone.png'
authors: ['adahafizh']
---

import { YouTube } from 'astro-embed';

# Re-thinking Fluid

When we were discussing on how to improve visuals for our capstone, we were hell bent on doing two things: a) make space, cosmic-ish particles, or b) fluid simulation. For this week, I am trying out by mimicking / branching off last semester's visuals with fluid wave simulation. The concept that I found interesting to implement for this week was loosely based off [Voronoi Cells](https://mathworld.wolfram.com/VoronoiDiagram.html) or [Diagram](https://en.wikipedia.org/wiki/Voronoi_diagram). 

> The partitioning of a plane with `n` points into convex polygons such that each polygon contains exactly one generating point and every point in a given polygon is closer to its generating point than to any other. A Voronoi diagram is sometimes also known as a Dirichlet tessellation. The cells are called **Dirichlet regions, Thiessen polytopes, or Voronoi polygons** (from Wolfram Mathworld)

<div style="display: flex; justify-content: center; gap: 5px;">
    <figure style="text-align: center;">
        <img src="https://upload.wikimedia.org/wikipedia/commons/5/54/Euclidean_Voronoi_diagram.svg" alt="Voronoi 1" style="width: 100%;"/>
        <figcaption>Voronoi Diagram A</figcaption>
    </figure>

    <figure style="text-align: center;">
        <img src="https://mathworld.wolfram.com/images/eps-svg/VoronoiDiagram_700.svg" alt="Voronoi 2" style="width: 100%;"/>
        <figcaption>Voronoi Diagram B</figcaption>
    </figure>
</div> 

## Inspirations

<div style="display: flex; justify-content: center; gap: 5px;">
    <figure style="text-align: center;">
        <img src="https://images.newscientist.com/wp-content/uploads/2020/09/16181027/credit_mohamed-khaki-eyeem-getty-images_web.jpg?width=837" alt="Voronoi 2" style="width: 100%;"/>
        <figcaption> Ocean Waves - Khaki Eyeem, Getty Images</figcaption>
    </figure>
</div> 

<YouTube id="https://youtu.be/VIDEO_ID" />

## What is wrong with previous waves?

Unfortunately, as I observe closely to the recordings from previous capstone mini exhibition, I noticed that the use of 3D rendering for feedback waves in TouchDesigner and scaling it up was insanely taxing for my computer. The reason is also because the computer also streams high-bandwith data from Kinect Azure. This means moving forward, I need to think on creating visuals that are `"optimized"` by reducing the amount of feedback loops. 

## Passive Movement vs. Active Movement

When we were discussing earlier in the beginning of this semester, we were engaging in what actions should the users make? Is it them waving around, or should their presence, in a way or another influence the visuals which in return provide feedback to them? The goal of this week's prototype is to create visuals that have nature-like smoothness properties which I think are satisfying. **This also means that we need to research on how these nature visuals, which could imply biophilic in a way (throwing back to our initial proposals), could invoke certain emotional feeling. **

# In Action

<div style="display: flex; justify-content: center; gap: 5px;">
    <figure style="text-align: center;">
        <img src="https://i.imgur.com/Lrq1oSd.gif" alt="Voronoi - TD" style="width: 100%;"/>
        <figcaption> Voronoi-inspired fluid movement simulation</figcaption>
    </figure>
</div>

<div style="display: flex; justify-content: center; gap: 5px;">
    <figure style="text-align: center;">
        <img src="https://i.imgur.com/5bGV4Mn.gif" alt="Voronoi - TD" style="width: 100%;"/>
        <figcaption> 2D Feedback Loops, Edges, TouchDesigner Interface</figcaption>
    </figure>
</div>

<div style="display: flex; justify-content: center; gap: 5px;">
    <figure style="text-align: center;">
        <img src="https://i.imgur.com/4K321Lk.gif" alt="Voronoi - TD" style="width: 100%;"/>
        <figcaption> Variations A</figcaption>
    </figure>
    <figure style="text-align: center;">
        <img src="https://i.imgur.com/e0m0Lql.gif" alt="Voronoi - TD" style="width: 100%;"/>
        <figcaption> Variations B</figcaption>
    </figure>
    <figure style="text-align: center;">
        <img src="https://i.imgur.com/MZdjrwD.gif" alt="Voronoi - TD" style="width: 100%;"/>
        <figcaption> Variations C & much more!</figcaption>
    </figure>
</div>

Essentially it works by using a noise with certain parameters and feeding it `feedback loops, edges, and slopes`. Unlike the previous wave which requires normal maps, this one works straight using 2D TOPs, which means it is very light even scaled up (though adjustments to pixel formatting is still required). 

# Simple Finite State Machines

I've also been thinking on how this simulation would look like if it is `scaled up.` In order to do that, I am trying to implement [Finite State Machines](https://en.wikipedia.org/wiki/Finite-state_machine), where depending on the state, the visuals change in a way or another. 

> It is an abstract machine that can be in exactly one of a finite number of states at any given time. The FSM can change from one state to another **in response to some inputs**; the change from one state to another is called a transition (Wikipedia, hehe)

<div style="display: flex; justify-content: center; gap: 5px;">
    <figure style="text-align: center;">
        <img src="https://i.imgur.com/GkiGpKX.gif" alt="Voronoi - TD" style="width: 100%;"/>
        <figcaption> TD FSM using Logic CHOPs</figcaption>
    </figure>
    <figure style="text-align: center;">
        <img src="https://i.imgur.com/7LVl3Ta.png" alt="Voronoi - TD" style="width: 100%;"/>
        <figcaption> How the states work</figcaption>
    </figure>
</div>

In TouchDesigner, the way I implement now is very simple using `Logic CHOPs,` where I track the movement and speed of a mouse and change the FSM into three pre-defined colors (states). Unfortunately, I had to cheat a bit by implementing it using Alpha instead of smoothly blending, which is a homework that I have to figure out moving forward. 

# Resources 
- [Pseudo Voronoi - Elekktronaut](https://www.youtube.com/watch?v=zMunf5NaR9E)
- [TouchDesigner Logic CHOPs](https://youtu.be/7Gz57z0UEvo?si=DVBu6nDI5fGPns4j)

